!function(e,t){function r(e){return e<10?"0"+e:e}function n(){var e=t.getElementsByClassName("Jcalendar-wrapper")[0],r=t.getElementsByClassName("Jcalendar-bg")[0];if("object"==typeof e){e.style.bottom="-100%";var n=setTimeout(function(){e.parentNode.removeChild(e),clearTimeout(n)},300)}if("object"==typeof r){r.style.opacity="0";var a=setTimeout(function(){r.parentNode.removeChild(r),clearTimeout(a)},300)}}function a(e){var t=new Date,r=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),c=t.getHours(),s=t.getMinutes(),i=t.getSeconds(),u=[],o=[],l=/^[0-9]{3}[1-9]\-[0-9][1-9]\-[0-9][1-9]$/;return/^[0-9]{3}[1-9]\-[0-9][1-9]\-[0-9][1-9] ([0-1][1-9]|2[0-3])\:[0-5][0-9]\:[0-5][0-9]$/.test(e)?(r=(u=/[0-9]{3}[1-9]\-[0-9][1-9]\-[0-9][1-9]/.exec(e)[0].split("-"))[0],n=u[1],a=u[2],c=(o=/([0-1][1-9]|2[0-3])\:[0-5][0-9]\:[0-5][0-9]/.exec(e)[0].split(":"))[0],s=o[1],i=o[2]):l.test(e)&&(r=(u=/[0-9]{3}[1-9]\-[0-9][1-9]\-[0-9][1-9]/.exec(e)[0].split("-"))[0],n=u[1],a=u[2]),{currentYear:parseInt(r),currentMonth:parseInt(n),currentDay:parseInt(a),currentHour:parseInt(c),currentMinute:parseInt(s),currentSecond:parseInt(i)}}function c(e,t,r){var n=[],a=new Date;!e|!t|!r&&(e=a.getFullYear(),t=a.getMonth()+1,r=a.getDate());for(var c=new Date(e,t-1,1),s=c.getDay(),i=new Date(e,t,0).getDate(),u=new Date(e,t-1,0).getDate(),o=0;o<s;o++){var l="disabled",d=u-s+o+1;0===(m=t-1)&&(m=1),n.push({date:d,showDate:d,thisMonth:m,className:l})}for(o=0;o<i;o++){var l="available",m=t;(d=o+1)===parseInt(r)&&(l="available current"),n.push({date:d,showDate:d,thisMonth:m,className:l})}for(var p=n.length,o=0;o<42-p;o++){var l="disabled",d=o+1;13===(m=t+1)&&(m=12),n.push({date:d,showDate:d,thisMonth:m,className:l})}return{year:c.getFullYear(),month:c.getMonth()+1,days:n}}function s(e){this.inputDom=t.getElementById(e.input),this.currentYear="",this.currentMonth="",this.currentDay="",this.currentHour=0,this.currentMinute=0,this.currentSecond=0,this.timeSelector=!1,this.startYear=1970,this.title="请选择",e.title&&"string"==typeof e.title&&(this.title=e.title),e.timeSelector&&"boolean"==typeof e.timeSelector&&(this.timeSelector=e.timeSelector),console.log(this.type),this.init()}s.prototype={constructor:s,init:function(){this.inputBindEvent()},render:function(e,n,a,s,i,u,o){var l=c(e,n,a),e=l.year,n=l.month,d=l.days;this.currentYear=e,this.currentMonth=n,this.currentDay=a,this.currentHour=s,this.currentMinute=i,this.currentSecond=u;var m="";d.forEach(function(e,t){t%7==0&&(m+="<tr>"),m+="<td class='"+e.className+"'>"+e.showDate+"</td>",t%7==6&&(m+="</tr>")});var p="<div class='Jcalendar-date-wrapper'><div class='Jcalendar-date-header'><a class='Jcalendar-prev-year' href='javascript:void(0);'>&lt;&lt;</a><a class='Jcalendar-prev-month' href='javascript:void(0);'>&lt;</a><span class='Jcalendar-year'> "+this.currentYear+"年</span><span class='Jcalendar-month'>"+r(this.currentMonth)+"月 </span><a class='Jcalendar-next-year' href='javascript:void(0);'>&gt;&gt;</a><a class='Jcalendar-next-month' href='javascript:void(0);'>&gt;</a></div><table class='Jcalendar-date-table'><thead><tr><th>日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th></tr></thead><tbody>"+m+"</tbody></table></div>",h=this.timeSelector?"<div class='Jcalendar-time-wrapper'><table class='Jcalendar-time-table'><tr><td><p class='Jcalendar-time-tag'>时</p><p class='hour-add'>+</p><p class='hour-text'>"+r(this.currentHour)+"</p><p class='hour-dec'>-</p></td><td><p class='Jcalendar-time-tag'>分</p><p class='minute-add'>+</p><p class='minute-text'>"+r(this.currentMinute)+"</p><p class='minute-dec'>-</p></td><td><p class='Jcalendar-time-tag'>秒</p><p class='second-add'>+</p><p class='second-text'>"+r(this.currentSecond)+"</p><p class='second-dec'>-</p></td></tr></table></div>":"",v=this.timeSelector?"<p class='Jcalendar-btn-tab'>选择时间</p>":"",g="<div class='Jcalendar-header'><a href='javascript:void(0);' class='Jcalendar-btn-cancel'>取消</a><span class='Jcalendar-title-text'>"+this.title+"</span><a href='javascript:void(0);' class='Jcalendar-btn-sure'>确定</a></div><div class='Jcalendar-body'>"+p+h+"</div><div class='Jcalendar-footer'>"+v+"</div>",y=t.getElementsByClassName("Jcalendar-wrapper")[0];if(o||"object"!=typeof y){var M=t.createElement("div");M.className="Jcalendar-wrapper",M.innerHTML=g;var f=t.createElement("div");f.className="Jcalendar-bg",t.body.appendChild(f),t.body.appendChild(M);var E=setTimeout(function(){f.style.opacity="1",M.className="Jcalendar-wrapper show",clearTimeout(E)},50);this.selectorBindEvent(M,f)}else y.innerHTML=g,this.selectorBindEvent(y,document.getElementsByClassName("Jcalendar-bg")[0])},inputBindEvent:function(){var e=this;this.inputDom.addEventListener("click",function(t){e.currentYear=a(e.inputDom.value).currentYear,e.currentMonth=a(e.inputDom.value).currentMonth,e.currentDay=a(e.inputDom.value).currentDay,e.currentHour=a(e.inputDom.value).currentHour,e.currentMinute=a(e.inputDom.value).currentMinute,e.currentSecond=a(e.inputDom.value).currentSecond,e.render(e.currentYear,e.currentMonth,e.currentDay,e.currentHour,e.currentMinute,e.currentSecond,!0),t.stopPropagation()})},selectorBindEvent:function(e,t){var a=this;e.getElementsByClassName("Jcalendar-btn-sure")[0].addEventListener("click",function(e){!1===a.timeSelector?a.inputDom.value=a.currentYear+"-"+r(a.currentMonth)+"-"+r(a.currentDay):a.inputDom.value=a.currentYear+"-"+r(a.currentMonth)+"-"+r(a.currentDay)+" "+r(a.currentHour)+":"+r(a.currentMinute)+":"+r(a.currentSecond),n(),e.stopPropagation()}),e.getElementsByClassName("Jcalendar-btn-cancel")[0].addEventListener("click",function(e){e.stopPropagation(),n()}),e.getElementsByClassName("Jcalendar-prev-year")[0].addEventListener("click",function(e){a.currentYear>a.startYear&&a.render(a.currentYear-1,a.currentMonth,a.currentDay,a.currentHour,a.currentMinute,a.currentSecond,!1),e.stopPropagation()}),e.getElementsByClassName("Jcalendar-prev-month")[0].addEventListener("click",function(e){a.currentMonth-1==0&&a.currentYear>a.startYear?a.render(a.currentYear-1,12,a.currentDay,a.currentHour,a.currentMinute,a.currentSecond,!1):a.currentMonth-1>0&&a.render(a.currentYear,a.currentMonth-1,a.currentDay,a.currentHour,a.currentMinute,a.currentSecond,!1),e.stopPropagation()}),e.getElementsByClassName("Jcalendar-next-month")[0].addEventListener("click",function(e){a.currentMonth+1>12?a.render(a.currentYear+1,1,a.currentDay,!1):a.render(a.currentYear,a.currentMonth+1,a.currentDay,a.currentHour,a.currentMinute,a.currentSecond,!1),e.stopPropagation()}),e.getElementsByClassName("Jcalendar-next-year")[0].addEventListener("click",function(e){a.render(a.currentYear+1,a.currentMonth,a.currentDay,a.currentHour,a.currentMinute,a.currentSecond,!1),e.stopPropagation()}),e.addEventListener("click",function(t){t.target.className.indexOf("available")>-1&&(a.currentDay=t.target.innerHTML,e.getElementsByClassName("current")[0].className="available",t.target.className="available current",t.stopPropagation())}),!0===a.timeSelector&&(e.getElementsByClassName("Jcalendar-btn-tab")[0].addEventListener("click",function(t){"选择时间"===t.target.innerHTML?(t.target.innerHTML="选择日期",e.getElementsByClassName("Jcalendar-time-wrapper")[0].className="Jcalendar-time-wrapper show"):(t.target.innerHTML="选择时间",e.getElementsByClassName("Jcalendar-time-wrapper")[0].className="Jcalendar-time-wrapper")}),e.getElementsByClassName("hour-add")[0].addEventListener("click",function(t){a.currentHour<23?a.currentHour++:a.currentHour=0,e.getElementsByClassName("hour-text")[0].innerHTML=r(a.currentHour),t.stopPropagation()}),e.getElementsByClassName("hour-dec")[0].addEventListener("click",function(t){a.currentHour>0?a.currentHour--:a.currentHour=23,e.getElementsByClassName("hour-text")[0].innerHTML=r(a.currentHour),t.stopPropagation()}),e.getElementsByClassName("minute-add")[0].addEventListener("click",function(t){a.currentMinute<59?a.currentMinute++:a.currentMinute=0,e.getElementsByClassName("hour-text")[0].innerHTML=r(a.currentHour),e.getElementsByClassName("minute-text")[0].innerHTML=r(a.currentMinute),t.stopPropagation()}),e.getElementsByClassName("minute-dec")[0].addEventListener("click",function(t){a.currentMinute>0?a.currentMinute--:a.currentMinute=59,e.getElementsByClassName("hour-text")[0].innerHTML=r(a.currentHour),e.getElementsByClassName("minute-text")[0].innerHTML=r(a.currentMinute),t.stopPropagation()}),e.getElementsByClassName("second-add")[0].addEventListener("click",function(t){a.currentSecond<59?a.currentSecond++:a.currentSecond=0,e.getElementsByClassName("hour-text")[0].innerHTML=r(a.currentHour),e.getElementsByClassName("minute-text")[0].innerHTML=r(a.currentMinute),e.getElementsByClassName("second-text")[0].innerHTML=r(a.currentSecond),t.stopPropagation()}),e.getElementsByClassName("second-dec")[0].addEventListener("click",function(t){a.currentSecond>0?a.currentSecond--:a.currentSecond=59,e.getElementsByClassName("hour-text")[0].innerHTML=r(a.currentHour),e.getElementsByClassName("minute-text")[0].innerHTML=r(a.currentMinute),e.getElementsByClassName("second-text")[0].innerHTML=r(a.currentSecond),t.stopPropagation()})),t.addEventListener("click",function(){n()})}},"object"==typeof exports?module.exports=s:"function"==typeof define&&define.amd?define([],function(){return s}):e.Jcalendar=s}(window,document);