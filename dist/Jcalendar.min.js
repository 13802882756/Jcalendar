!function(t,e){function a(t,e){var a=t.offsetLeft,r=t.offsetTop+t.offsetHeight+6;e.style.left=a+"px",e.style.top=r+"px"}function r(t){return t<10?"0"+t:t}function n(){var t=e.getElementsByClassName("Jcalendar-wrapper")[0];t&&t.parentNode.removeChild(t)}function c(t){var e=t.split("-"),a="",r="",n="",c=new Date;if(""===t)a=c.getFullYear(),r=c.getMonth()+1,n=c.getDate();else if(3===e.length){var s=e[0],o=parseInt(e[1]),i=parseInt(e[2]);new Date(s,o,0)>=i&&(a=s,r=o,n=i)}return{currentYear:a,currentMonth:r,currentDay:n}}function s(t,e,a){var r=[],n=new Date;!t|!e|!a&&(t=n.getFullYear(),e=n.getMonth()+1,a=n.getDate());for(var c=new Date(t,e-1,1),s=c.getDay(),o=new Date(t,e,0).getDate(),i=new Date(t,e-1,0).getDate(),u=0;u<s;u++){var h="available disabled",l=i-s+u+1;0===(d=e-1)&&(d=1),r.push({date:l,showDate:l,thisMonth:d,className:h})}for(u=0;u<o;u++){var h="available",d=e;(l=u+1)===a&&(h="available current"),n.getDate()===l&&n.getFullYear()===t&&n.getMonth()+1===e?r.push({date:l,showDate:"今天",thisMonth:d,className:h}):r.push({date:l,showDate:l,thisMonth:d,className:h})}for(var p=r.length,u=0;u<42-p;u++){var h="available disabled",l=u+1;13===(d=e+1)&&(d=12),r.push({date:l,showDate:l,thisMonth:d,className:h})}return{year:c.getFullYear(),month:c.getMonth()+1,days:r}}function o(t){this.inputDom=e.getElementById(t.input),this.currentYear="",this.currentMonth="",this.currentDay="",this.init()}o.prototype={constructor:o,init:function(){this.bind()},render:function(t,n,c){var o=s(t,n,c),t=o.year,n=o.month,i=o.days;this.currentYear=t,this.currentMonth=n,this.currentDay=c;var u="";i.forEach(function(t,e){e%7==0&&(u+="<tr>"),u+="<td class='"+t.className+"'>"+t.showDate+"</td>",e%7==6&&(u+="<tr>")});var h="<div class='Jcalendar-header'><a class='Jcalendar-prev-year' href='javascript:void(0);'>&lt;&lt;</a><a class='Jcalendar-prev-month' href='javascript:void(0);'>&lt;</a><span class='Jcalendar-year'> "+this.currentYear+"年</span><span class='Jcalendar-month'>"+r(this.currentMonth)+"月 </span><a class='Jcalendar-next-month' href='javascript:void(0);'>&gt;</a><a class='Jcalendar-next-year' href='javascript:void(0);'>&gt;&gt;</a></div><div class='Jcalendar-body'><table class='Jcalendar-table'><thead><tr><th>日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th></tr></thead><tbody>"+u+"</tbody></table></div>",l=e.createElement("div");l.className="Jcalendar-wrapper",l.innerHTML=h,e.body.appendChild(l),this.bindEvent(l),a(this.inputDom,l)},bindEvent:function(t){var a=this;t.addEventListener("click",function(t){"Jcalendar-prev-year"===t.target.className?(a.inputDom.focus(),a.render(a.currentYear-1,a.currentMonth,a.currentDay)):"Jcalendar-prev-month"===t.target.className?(a.inputDom.focus(),a.render(a.currentYear,a.currentMonth-1,a.currentDay)):"Jcalendar-next-month"===t.target.className?(a.inputDom.focus(),a.currentMonth+1>12?a.render(a.currentYear+1,1,a.currentDay):a.render(a.currentYear,a.currentMonth+1,a.currentDay)):"Jcalendar-next-year"===t.target.className?(a.inputDom.focus(),a.render(a.currentYear+1,a.currentMonth,a.currentDay)):t.target.className.indexOf("available")>-1&&(a.currentDay=t.target.innerHTML,n(),a.inputDom.value=a.currentYear+"-"+r(a.currentMonth)+"-"+r(a.currentDay)),t.stopPropagation()}),e.addEventListener("click",function(){n()})},bind:function(){var t=this;this.inputDom.addEventListener("click",function(e){t.currentYear=c(t.inputDom.value).currentYear,t.currentMonth=c(t.inputDom.value).currentMonth,t.currentDay=c(t.inputDom.value).currentDay,n(),t.render(t.currentYear,t.currentMonth,t.currentDay),e.stopPropagation()})}},"object"==typeof exports?module.exports=o:"function"==typeof define&&define.amd?define([],function(){return o}):t.Jcalendar=o}(window,document);